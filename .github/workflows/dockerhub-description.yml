# Имя задачи, которая будет обновлять описание на Docker Hub
name: Update Docker Hub Description

# Определение условий, при которых задача будет запускаться
on:
  push:
    branches:
      - master  # Задача запускается при пуше в ветку master
    paths:
      - README.md  # Задача запускается при изменении файла README.md
      - .github/workflows/dockerhub-description.yml  # Задача запускается при изменении этого файла с workflow

jobs:
  # Определение работы (job) для обновления описания Docker Hub
  dockerhub-description:
    runs-on: ubuntu-latest  # Работа выполняется на последней версии Ubuntu
    steps:
      -
        name: Checkout  # Шаг для клонирования репозитория
        uses: actions/checkout@v4  # Используем GitHub Action для клонирования репозитория
      -
        name: Docker Hub Description  # Шаг для обновления описания на Docker Hub
        uses: peter-evans/dockerhub-description@v4  # Используем сторонний GitHub Action для обновления описания на Docker Hub
        with:
          username: ${{ secrets.DOCKER_HUB_USERNAME }}  # Имя пользователя Docker Hub, хранится в секрете
          password: ${{ secrets.DOCKER_HUB_ACCESS_TOKEN }}  # Токен доступа Docker Hub, хранится в секрете
          repository: ${{ vars.IMAGE_NAME }}  # Имя репозитория на Docker Hub, хранится в переменной окружения
          short-description: ${{ github.event.repository.description }}  # Краткое описание, взято из описания репозитория на GitHub
